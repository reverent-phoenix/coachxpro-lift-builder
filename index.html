<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CoachXPro Lift Builder ‚Äî Integrated Block</title>
  <style>
    :root { --red: #e10b0b; --gray: #f4f4f4; }
    #app, * { box-sizing: border-box; font-family: system-ui, sans-serif; }
    #app { max-width: 720px; margin: 2rem auto; padding: 1rem; }
    .card { background: var(--gray); border-radius: 1rem; padding: 1rem; margin-bottom: 1.25rem; box-shadow:0 4px 8px rgba(0,0,0,0.05); }
    .title { font-weight:600; margin-bottom:0.5rem; }
    .options { display:flex; flex-direction:column; gap:0.5rem; margin-top:0.25rem; }
    .opt { display:flex; align-items:center; gap:0.5rem; padding:0.75rem 1rem; border:2px solid transparent; border-radius:0.75rem; background:#fff; cursor:pointer; }
    .opt:hover { border-color:var(--red); }
    .opt input { accent-color:var(--red); }
    .opt input:checked + span { font-weight:600; color:var(--red); }
    .info-icon { margin-left:0.5rem; cursor:pointer; font-size:1rem; }
    button.next { width:100%; padding:0.75rem; background:var(--red); color:#fff; font-weight:600; border:none; border-radius:0.75rem; margin-top:1rem; }
    button.next:disabled { opacity:0.5; }
    .cat-head { margin:0.75rem 0 0.25rem; font-weight:600; }
    a { text-decoration:none; color:inherit; }
  </style>
</head>
<body>
  <div id="app"></div>
  <script>
    // --- Data Pools ---
    const BB_CIRCUITS = {
      1: ["Rotational Step-Ups (L-R)","Flys (bench)","Lunges (L-R)","Lat Pulldown","Stooped Russian Twists w/ stop","Good Mornings","DB Alternating Toe Touches","V-Sits","Hanging Lateral Leg Lifts","Twisting Sit-ups","Pullovers","Russian Twists (Hay Bales)"],
      2: ["Lunge w/ Twist","Single-Arm Bent Over Row","Weighted Crunches","Straight-Leg Deadlift","Arm Curls","Seated Shoulder Press","Lat Pulldown","DB Alternating Toe Touches","Dips","Hanging Leg Lifts","Push-ups (feet up)","Back Hypers","Pull-ups"],
      3: ["Russian Twists ‚Äì Standing","Arm Curls","DB Lateral Flys","DB Alternating Toe Touches","Rotational Step-Ups","Weighted Crunches","Inverted Row","Russian Twist Lunge","Hanging Knee Raises","Single-Arm Row","Military Press","Straight-Leg Deadlift","Weighted Back Hyper","Hanging L's"],
      4: ["V-Sits","Hanging L's","Russian Twist - Overhead Twists","Seated Good Mornings","Seated DB Shoulder Press","Hanging Leg Lifts","Lat Pulldowns","Single-Arm Curls","Back Hyper w/Twist","Inverted Row","DB Alternating Toe Touch","Repeated Crossover Step Ups (L-R)","Weighted Crunches","Single-arm Bent Over Row","Military Press","Weighted Back Hyper","Toe Risers","Russian Twist Standing w/Bar","V-Sits","Hanging Lateral Knee Lifts"]
    };
    const OLYMPIC   = ["Power Clean","Hang Clean","Power Snatch","Mid‚ÄëThigh Pull","Snatch Pull","Clean Pull","DB Snatch"];
    const BALLISTIC = ["Jump Squat","Trap‚ÄëBar Jump","Bench Press Throw","Med‚ÄëBall Throw","Split‚ÄëJerk Jump"];
    const STATIC    = ["Back Squat","Front Squat","Trap‚ÄëBar Deadlift","Conventional Deadlift","Split Squat","Bench Press","Incline Bench","Weighted Pull‚Äëups","Military Press","Weighted Dips"];
    const REGIONAL  = ["RDL","Hip Thrust","Step‚ÄëUps","DB Row","Lat Pull‚ÄëDown","Nordic Curl"];
    const LIFTS     = { olympic:OLYMPIC, ballistic:BALLISTIC, static:STATIC, regional:REGIONAL };

    // --- Schemes (added RS for realization regional) ---
    const SCHEMES = {
      BPD: { sets:"4-9", reps:"4-5", pct:"50-65%", rest:"2-3 min" },
      RFDP: { sets:"4-9", reps:"2-4", pct:"70-85%", rest:"2-3 min" },
      RFD: { sets:"5-9", reps:"1-2", pct:"90-100%",rest:"Complete" },
      ASD: { sets:"4-8", reps:"1-5", pct:"80-100%",rest:"Complete" },
      ASC: { sets:"3-6", reps:"4-8", pct:"60-80%", rest:"2-3 min" },
      ASP: { sets:"3-6", reps:"5-8",pct:"60-80%", rest:"2-3 min" },
      BB: { reps:"10-12", rest:"60-90‚ÄØs" },
      RS: { sets:"3-8", reps:"5-12", pct:"10-50% BW", rest:"Sufficient to ensure quality w/ slight lactate accumulation" }
    };

    // --- Per‚Äëphase counts ---
    const phaseCounts = {
      acc:   { olympic:1, ballistic:1, static:2, regional:2 },
      trans: { olympic:1, ballistic:1, static:2, regional:1 },
      real:  { olympic:1, ballistic:1, static:1, regional:1 },
      main:  { olympic:1, ballistic:1, static:1, regional:0 }
    };

    // --- Microcycle & Info ---
    const microMap = {
      acc:   [{t:"Foundation Week",v:"foundation"},{t:"Volume Week",v:"volume"},{t:"Power Week",v:"power"},{t:"Regeneration Week",v:"regeneration"}],
      trans: [{t:"Integration Week",v:"integration"},{t:"Conversion Week",v:"conversion"},{t:"Intensification Week",v:"intensification"},{t:"Restoration Week",v:"restoration"}],
      real:  [{t:"Peak Intensity Week",v:"peak"},{t:"Competition Simulation",v:"competition"},{t:"Taper Week",v:"taper"},{t:"Recovery Week",v:"recovery"}],
      main:  [{t:"Retention Week",v:"retention"},{t:"Potentiation Week",v:"potentiation"},{t:"Load Mgmt Week",v:"load_management"},{t:"Recovery Week",v:"recovery"}]
    };
    const microInfo = {
      foundation:      "Foundation: light‚Äëmoderate loads, technique, mobility.",
      volume:          "Volume: higher rep‚Äëvolume for work capacity.",
      power:           "Power: explosive Olympic/ballistic emphasis.",
      regeneration:    "Regeneration: active recovery, low load.",
      integration:     "Integration: combine general & specific work.",
      conversion:      "Conversion: shift toward sport‚Äëspecific power.",
      intensification: "Intensification: heavy loads, low reps.",
      restoration:     "Restoration: planned deload & recovery.",
      peak:            "Peak: near-max intensity, low volume.",
      competition:     "Competition Simulation: mimic meet demands.",
      taper:           "Taper: reduce volume, maintain intensity.",
      recovery:        "Recovery: active rest, restore energy.",
      retention:       "Retention: maintain gains, minimal volume.",
      potentiation:    "Potentiation: low‚Äëvolume, high‚Äëintent work.",
      load_management: "Load Mgmt: adjust around competition load."
    };

    let S={}, app=document.getElementById("app");

    function createRadio(title, opts, key, cb){
      const c=document.createElement("div");c.className="card";
      c.innerHTML=`<div class="title">${title}</div>`;
      const box=document.createElement("div");box.className="options";c.appendChild(box);
      opts.forEach(o=>box.insertAdjacentHTML("beforeend",
        `<label class="opt"><input type="radio" name="${key}" value="${o.v}"><span>${o.t}</span></label>`));
      const btn=document.createElement("button");btn.className="next";
      btn.textContent="Next";btn.disabled=true;c.appendChild(btn);
      c.addEventListener("change",()=>btn.disabled=false);
      btn.onclick=()=>{ S[key]=c.querySelector("input:checked").value; cb(); };
      return c;
    }

    function stepMacro(){
      app.innerHTML=""; 
      app.appendChild(createRadio("1Ô∏è‚É£ What season are you in right now?",
        [
          {t:"Off‚ÄëSeason / Accumulation (Jun‚ÄìAug)",v:"acc"},
          {t:"Pre‚ÄëSeason / Transmutation (Sep‚ÄìNov)",v:"trans"},
          {t:"Indoor Season / Realization (Dec‚ÄìFeb)",v:"real"},
          {t:"Outdoor Season / Maintenance (Mar‚ÄìMay)",v:"main"} 
        ],
        "phase", stepMicro
      ));
    }

    function stepMicro(){
      app.innerHTML="";
      const opts=microMap[S.phase];
      const card=createRadio("2Ô∏è‚É£ Which microcycle (week) are you in?",opts,"micro",stepTrack);
      opts.forEach(o=>{
        const inp=card.querySelector(`input[value="${o.v}"]`);
        const lab=inp.closest("label");
        const info=document.createElement("span");
        info.className="info-icon"; info.textContent="‚ÑπÔ∏è";
        info.onclick=()=>alert(microInfo[o.v]||"");
        lab.appendChild(info);
      });
      app.appendChild(card);
    }

    function stepTrack(){
      app.innerHTML="";
      app.appendChild(createRadio("3Ô∏è‚É£ What did/will you do on the track today?",
        [
          {t:"Speed / Power",v:"speed"},
          {t:"Strength / No Sprints",v:"strength"},
          {t:"Recovery / Tempo",v:"recovery"},
          {t:"Endurance / Lactate",v:"endurance"}
        ],
        "track", stepRecovery
      ));
    }

    function stepRecovery(){
      app.innerHTML="";
      app.appendChild(createRadio("4Ô∏è‚É£ How do you feel?",
        [
          {t:"Fresh",v:"fresh"},
          {t:"Somewhat Fatigued",v:"mod"},
          {t:"Very Sore (BB Only)",v:"sore"}
        ],
        "recovery", stepWorkoutChoice
      ));
    }

    function stepWorkoutChoice(){
      if(S.recovery==="sore"){
        S.forceBB=true; return bodybuildingPicker();
      }
      if(S.recovery==="mod"){
        app.innerHTML="";
        return app.appendChild(createRadio("5Ô∏è‚É£ You‚Äôre fatigued‚Äîpick session",
          [
            {t:"Primary Lift Session",v:"primary"},
            {t:"Bodybuilding Circuit",v:"bb"}
          ],
          "today", ()=>S.today==="bb"?bodybuildingPicker():picker()
        ));
      }
      picker();
    }

    function bodybuildingPicker(){
      app.innerHTML="";
      const c=document.createElement("div");c.className="card";
      c.innerHTML=`<div class="title">üèãÔ∏è Bodybuilding Circuit</div><p>10‚Äì12 reps; rest 60‚Äì90‚ÄØs</p>`;
      Object.entries(BB_CIRCUITS).forEach(([n,a])=>{
        c.insertAdjacentHTML("beforeend",
          `<label class="opt"><input type="radio" name="bbc" value="${n}"><span>Circuit #${n} (${a.length})</span></label>`);
      });
      const btn=document.createElement("button");btn.className="next";
      btn.textContent="Finish";btn.disabled=true;c.appendChild(btn);
      c.addEventListener("change",()=>btn.disabled=!c.querySelector("input:checked"));
      btn.onclick=()=>{
        const n=c.querySelector("input:checked").value;
        S.chosen={bb:BB_CIRCUITS[n]}; S.bbRounds=S.forceBB?1:2; summary();
      };
      app.appendChild(c);
    }

    function picker(){
      const req=phaseCounts[S.phase];
      app.innerHTML="";
      const c=document.createElement("div");c.className="card";
      c.innerHTML=`<div class="title">5Ô∏è‚É£ Choose Your Lifts</div>`;
      Object.entries(req).forEach(([cat,cnt])=>{
        if(cnt>0){
          c.insertAdjacentHTML("beforeend",
            `<div class="cat-head">${cat.toUpperCase()} (choose ${cnt})</div>`);
          const box=document.createElement("div");box.className="options";c.appendChild(box);
          LIFTS[cat].forEach(ex=>box.insertAdjacentHTML("beforeend",
            `<label class="opt"><input type="checkbox" data-cat="${cat}" value="${ex}"><span>${ex}</span></label>`));
        }
      });
      const btn=document.createElement("button");btn.className="next";
      btn.textContent="Finish";btn.disabled=true;c.appendChild(btn);
      c.addEventListener("change",()=>{
        const cnts={olympic:0,ballistic:0,static:0,regional:0};
        c.querySelectorAll("input[type=checkbox]:checked").forEach(x=>cnts[x.dataset.cat]++);
        btn.disabled=!Object.entries(req).every(([k,v])=>cnts[k]===v);
      });
      btn.onclick=()=>{
        S.chosen={};
        c.querySelectorAll("input[type=checkbox]:checked").forEach(x=>
          (S.chosen[x.dataset.cat]=S.chosen[x.dataset.cat]||[]).push(x.value)
        );
        summary();
      };
      app.appendChild(c);
    }

    function summary(){
      app.innerHTML="";
      const c=document.createElement("div");c.className="card";
      c.innerHTML=`<h2 class="title">üèÖ Your Workout</h2><ul></ul>`;
      const ul=c.querySelector("ul");
      Object.entries(S.chosen).forEach(([cat,list])=>{
        list.forEach(ex=>{
          let key = cat==="bb"?"BB"
                  : cat==="olympic"? (S.phase==="trans"?"RFDP":"BPD")
                  : cat==="ballistic"? (S.phase==="real"?"RFD":"BPD")
                  : cat==="static"? (["acc","trans"].includes(S.phase)?"ASD":"ASP")
                  : cat==="regional"? (S.phase==="acc"?"ASP":S.phase==="trans"?"ASC":S.phase==="real"?"RS":"BB")
                  : "BB";
          const cfg=SCHEMES[key];
          const line = key==="BB"
            ? `${ex} ‚Äî ${cfg.reps} reps; rest ${cfg.rest}`
            : `${ex} ‚Äî ${cfg.sets}√ó${cfg.reps} @ ${cfg.pct}, rest ${cfg.rest}`;
          ul.insertAdjacentHTML("beforeend",`<li>${line}</li>`);
        });
      });
      if(S.chosen.bb){
        c.insertAdjacentHTML("beforeend",`<p><em>Complete ${S.bbRounds} round(s).</em></p>`);
      }
      const btn=document.createElement("button");btn.className="next";
      btn.textContent="Start Over";btn.onclick=start;c.appendChild(btn);
      app.appendChild(c);
    }

    function start(){ S={}; app.innerHTML=""; stepMacro(); }
    document.addEventListener("DOMContentLoaded", start);
  </script>
</body>
</html>
