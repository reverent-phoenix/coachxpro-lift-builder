<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CoachXPro Lift Builder ‚Äî Integrated Block</title>
  <style>
    :root { --red: #e10b0b; --gray: #f4f4f4; }
    #app, * { box-sizing: border-box; font-family: system-ui, sans-serif; }
    #app { max-width: 720px; margin: 2rem auto; padding: 1rem; }
    .card { background: var(--gray); border-radius: 1rem; padding: 1rem; margin-bottom: 1.25rem; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
    .title { font-weight: 600; margin-bottom: 0.5rem; }
    .options { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.25rem; }
    .opt { display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem; border: 2px solid transparent; border-radius: 0.75rem; background: #fff; cursor: pointer; }
    .opt:hover { border-color: var(--red); }
    .opt input { accent-color: var(--red); }
    .opt input:checked + span { font-weight: 600; color: var(--red); }
    button.next { width: 100%; padding: 0.75rem; background: var(--red); color: #fff; font-weight: 600; border: none; border-radius: 0.75rem; margin-top: 1rem; }
    button.next:disabled { opacity: 0.5; }
    .cat-head { margin: 0.75rem 0 0.25rem; font-weight: 600; }
    a { text-decoration: none; color: inherit; }
  </style>
</head>
<body>
  <div id="app"></div>
  <script>
    // --- Data ---
    const BB_CIRCUITS = {
      1: ["Rotational Step-Ups (L-R)","Flys (bench)","Lunges (L-R)","Lat Pulldown","Stooped Russian Twists w/ stop","Good Mornings","DB Alternating Toe Touches","V-Sits","Hanging Lateral Leg Lifts","Twisting Sit-ups","Pullovers","Russian Twists (Hay Bales)"],
      2: ["Lunge w/ Twist","Single-Arm Bent Over Row","Weighted Crunches","Straight-Leg Deadlift","Arm Curls","Seated Shoulder Press","Lat Pulldown","DB Alternating Toe Touches","Dips","Hanging Leg Lifts","Push-ups (feet up)","Back Hypers","Pull-ups"],
      3: ["Russian Twists ‚Äì Standing","Arm Curls","DB Lateral Flys","DB Alternating Toe Touches","Rotational Step-Ups","Weighted Crunches","Inverted Row","Russian Twist Lunge","Hanging Knee Raises","Single-Arm Row","Military Press","Straight-Leg Deadlift","Weighted Back Hyper","Hanging L's"],
      4: ["V-Sits","Hanging L's","Russian Twist - Overhead Twists","Seated Good Mornings","Seated DB Shoulder Press","Hanging Leg Lifts","Lat Pulldowns","Single-Arm Curls","Back Hyper w/Twist","Inverted Row","DB Alternating Toe Touch","Repeated Crossover Step Ups (L-R)","Weighted Crunches","Single-arm Bent Over Row","Military Press","Weighted Back Hyper","Toe Risers","Russian Twist Standing w/Bar","V-Sits","Hanging Lateral Knee Lifts"]
    };
    const REGIONAL  = ["RDL","Hip Thrust","Step-Ups","DB Row","Lat Pull-Down","Nordic Curl"];
    const OLYMPIC   = ["Power Clean","Hang Clean","Power Snatch","Mid-Thigh Clean Pull","Snatch Pull","Clean Pull","DB Snatch"];
    const STATIC    = ["Back Squat","Front Squat","Trap-Bar Deadlift","Conventional Deadlift","Split Squat (heavy)","Bench Press","Incline Bench","Weighted Pull-ups","Military Press","Weighted Dips"];
    const RS        = ["Continuous Hurdle Hops","Bounding Series","Single-Leg Pogos","Overhead Back MB Heave"];
    const LIFTS     = { static: STATIC, regional: REGIONAL, olympic: OLYMPIC, rs: RS };

    const SCHEMES = {
      BPD:  { sets:"4-5", reps:"4-5", pct:"50-65%",  rest:"2-3 min" },
      ASP:  { sets:"3-6", reps:"5-8", pct:"60-80%",  rest:"3-5 min" },
      BB:   { reps:"10-12", rest:"60-90 s" },
      RFDP: { sets:"4-9", reps:"2-4", pct:"70-85%",  rest:"2-3 min" },
      ASD:  { sets:"4-8", reps:"1-5", pct:"80-100%", rest:"3-5 min" },
      ASC:  { sets:"3-6", reps:"4-8", pct:"60-80%",  rest:"2-3 min" },
      RFD:  { sets:"5-9", reps:"1-2", pct:"90-100%", rest:"3-5 min" },
      RS:   { sets:"3-8", reps:"5-12", pct:"Bodyweight‚Äë50%", rest:"1-2 min" }
    };

    const phaseSchemes = {
      acc:   { olympic:["BPD"],          static:["ASP"],    regional:["BB"],    rs:[]    },
      trans: { olympic:["RFDP","BPD"],   static:["ASD","ASC"],regional:["BB"],  rs:[]    },
      real:  { olympic:["RFD"],          static:["ASD"],    regional:[],        rs:[]    },
      main:  { olympic:["BPD"],          static:["ASP"],    regional:[],        rs:["RS"]},
      rest:  { olympic:[],               static:[],         regional:[],        rs:[]    }
    };

    // --- App Logic ---
    let S = {}, app = document.getElementById("app");

    function createRadio(title, opts, key, cb) {
      const card = document.createElement("div"); card.className="card";
      card.innerHTML = `<div class="title">${title}</div>`;
      const box = document.createElement("div"); box.className="options"; card.appendChild(box);
      opts.forEach(o=>{
        box.insertAdjacentHTML("beforeend",
          `<label class="opt">
             <input type="radio" name="${key}" value="${o.v}">
             <span>${o.t}</span>
           </label>`);
      });
      const btn = document.createElement("button"); btn.className="next";
      btn.textContent="Next"; btn.disabled=true; card.appendChild(btn);
      card.addEventListener("change", ()=> btn.disabled=false);
      btn.onclick = ()=> { S[key] = card.querySelector("input:checked").value; cb(); };
      return card;
    }

    function stepSeason() {
      app.innerHTML="";
      app.appendChild(createRadio(
        "1Ô∏è‚É£ What season are you in right now?",
        [
          {t:"Off‚ÄëSeason¬†/¬†Accumulation (Jun‚ÄìAug)", v:"off"},
          {t:"Pre‚ÄëSeason¬†/¬†Transmutation (Sep‚ÄìNov)", v:"pre"},
          {t:"Indoor¬†/¬†Realization (Dec‚ÄìFeb)", v:"indoor"},
          {t:"Outdoor¬†/¬†Maintenance (Mar‚ÄìMay)", v:"outdoor"},
          {t:"Transition¬†/¬†Active Recovery", v:"rest"}
        ],
        "season", stepMicro
      ));
    }

    function stepMicro() {
      const phaseMap = { off:"acc", pre:"trans", indoor:"real", outdoor:"main", rest:"rest" };
      S.phase = phaseMap[S.season];
      app.innerHTML="";
      const microMap = {
        acc:   [{t:"Foundation Week",v:"foundation"},{t:"Volume Week",v:"volume"},{t:"Power Week",v:"power"},{t:"Regeneration Week",v:"regeneration"}],
        trans: [{t:"Integration Week",v:"integration"},{t:"Conversion Week",v:"conversion"},{t:"Intensification Week",v:"intensification"},{t:"Restoration Week",v:"restoration"}],
        real:  [{t:"Peak Intensity Week",v:"peak"},{t:"Competition Simulation Week",v:"competition"},{t:"Taper Week",v:"taper"},{t:"Recovery Week",v:"recovery"}],
        main:  [{t:"Retention Week",v:"retention"},{t:"Potentiation Week",v:"potentiation"},{t:"Load Mgmt Week",v:"load_management"},{t:"Recovery Week",v:"recovery"}],
        rest:  [{t:"Active Recovery",v:"active_recovery"}]
      };
      app.appendChild(createRadio(
        "2Ô∏è‚É£ Which microcycle are you in?",
        microMap[S.phase],
        "micro", stepTrack
      ));
    }

    function stepTrack() {
      app.innerHTML="";
      app.appendChild(createRadio(
        "3Ô∏è‚É£ What did you do on the track today?",
        [
          {t:"Speed‚ÄØ/‚ÄØPower",v:"speed"},
          {t:"Strength‚ÄØ/‚ÄØNo Sprints",v:"strength"},
          {t:"Recovery‚ÄØ/‚ÄØTempo",v:"recovery"},
          {t:"Endurance‚ÄØ/‚ÄØLactate",v:"endurance"}
        ],
        "track", stepRecovery
      ));
    }

    function stepRecovery() {
      app.innerHTML="";
      app.appendChild(createRadio(
        "4Ô∏è‚É£ How do you feel right now?",
        [
          {t:"Fresh",v:"fresh"},
          {t:"Moderately Fatigued",v:"mod"},
          {t:"Very Sore",v:"sore"}
        ],
        "recovery", stepWorkoutChoice
      ));
    }

    function stepWorkoutChoice() {
      if (S.recovery === "sore") {
        S.forceBB = true;
        bodybuildingPicker();
      } else if (S.recovery === "mod") {
        app.innerHTML="";
        app.appendChild(createRadio(
          "5Ô∏è‚É£ You‚Äôre moderately fatigued‚Äîwhat would you like to do today?",
          [
            {t:"Primary Session",v:"primary"},
            {t:"Bodybuilding Circuit",v:"bb"}
          ],
          "todayChoice",
          () => {
            if (S.todayChoice === "bb") bodybuildingPicker();
            else picker();
          }
        ));
      } else {
        picker();
      }
    }

    function bodybuildingPicker() {
      app.innerHTML="";
      const c = document.createElement("div"); c.className="card";
      c.innerHTML = `<div class="title">üèãÔ∏è‚Äç‚ôÄÔ∏è Choose a Bodybuilding Circuit</div>
                     <p>10‚Äì12 reps each, rest 60‚Äì90‚ÄØs between exercises</p>`;
      Object.entries(BB_CIRCUITS).forEach(([n,arr])=>{
        c.insertAdjacentHTML("beforeend",
          `<label class="opt">
             <input type="radio" name="bbc" value="${n}">
             <span>Circuit #${n} (${arr.length} exercises)</span>
           </label>`
        );
      });
      const btn = document.createElement("button"); btn.className="next";
      btn.textContent="Finish"; btn.disabled=true; c.appendChild(btn);
      c.addEventListener("change", ()=> btn.disabled = !c.querySelector("input:checked"));
      btn.onclick = ()=>{
        const n = c.querySelector("input[name='bbc']:checked").value;
        S.chosen = { bb: BB_CIRCUITS[n] };
        S.bbRounds = S.forceBB ? 1 : 2;
        summary();
      };
      app.appendChild(c);
    }

    function picker() {
      S.scheme_olympic   = phaseSchemes[S.phase].olympic[0]   || null;
      S.scheme_static    = phaseSchemes[S.phase].static[0]    || null;
      S.scheme_regional  = phaseSchemes[S.phase].regional[0]  || null;
      S.scheme_rs        = phaseSchemes[S.phase].rs[0]        || null;

      const req = {
        olympic:  S.scheme_olympic   ? 1 : 0,
        static:   S.scheme_static    ? 1 : 0,
        regional: S.scheme_regional  ? 1 : 0,
        rs:       S.scheme_rs        ? 1 : 0,
        bb:       0
      };

      app.innerHTML="";
      const c = document.createElement("div"); c.className="card";
      c.innerHTML = `<div class="title">üèãÔ∏è Choose Your Lifts</div>`;

      ["olympic","static","regional","rs"].forEach(cat=>{
        if (!req[cat]) return;
        c.insertAdjacentHTML("beforeend",`<div class="cat-head">${cat.toUpperCase()} (choose 1)</div>`);
        const box = document.createElement("div"); box.className="options"; c.appendChild(box);
        LIFTS[cat].forEach(l=>{
          box.insertAdjacentHTML("beforeend",
            `<label class="opt">
               <input type="checkbox" data-cat="${cat}" value="${l}">
               <span>${l}</span>
             </label>`
          );
        });
      });

      const btn = document.createElement("button"); btn.className="next"; btn.textContent="Finish"; btn.disabled=true; c.appendChild(btn);
      c.addEventListener("change", ()=>{
        const cnt = { olympic:0, static:0, regional:0, rs:0, bb:0 };
        c.querySelectorAll("input[type='checkbox']:checked").forEach(x=>cnt[x.dataset.cat]++);
        const ok = Object.keys(req).every(k => cnt[k] === req[k]);
        btn.disabled = !ok;
      });
      btn.onclick = ()=>{
        S.chosen = {};
        c.querySelectorAll("input[type='checkbox']:checked").forEach(x=>{
          (S.chosen[x.dataset.cat] = S.chosen[x.dataset.cat]||[]).push(x.value);
        });
        summary();
      };

      app.appendChild(c);
    }

    function summary() {
      app.innerHTML="";
      const c = document.createElement("div"); c.className="card";
      c.innerHTML = `<h2 class="title">üèÖ Your Workout</h2><ul></ul>`;
      const ul = c.querySelector("ul");

      Object.entries(S.chosen).forEach(([cat,list])=>{
        list.forEach(l=>{
          let schemeKey = "BB";
          if (cat==="olympic")  schemeKey = S.scheme_olympic;
          if (cat==="static")   schemeKey = S.scheme_static;
          if (cat==="regional") schemeKey = S.scheme_regional==="BB" ? "BB" : S.scheme_regional;
          if (cat==="rs")       schemeKey = S.scheme_rs;
          const cfg = SCHEMES[schemeKey];
          const text = schemeKey==="BB"
            ? `${l} ‚Äî ${cfg.reps} reps @ Bodyweight, rest ${cfg.rest}`
            : `${l} ‚Äî ${cfg.sets}√ó${cfg.reps} @ ${cfg.pct}, rest ${cfg.rest}`;
          ul.insertAdjacentHTML("beforeend", `<li>${text}</li>`);
        });
      });

      if (S.chosen.bb) {
        c.insertAdjacentHTML("beforeend", `<p><em>Complete ${S.bbRounds} circuit round(s).</em></p>`);
      }

      const btn = document.createElement("button"); btn.className="next"; btn.textContent="Start Over";
      btn.onclick = start; c.appendChild(btn);
      app.appendChild(c);
    }

    function start() { S = {}; app.innerHTML=""; stepSeason(); }
    document.addEventListener("DOMContentLoaded", start);
  </script>
</body>
</html>
