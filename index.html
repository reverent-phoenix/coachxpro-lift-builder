<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CoachXPro Lift Builder ‚Äî Integrated Block</title>
  <style>
    :root { --red: #e10b0b; --gray: #f4f4f4; }
    #app, * { box-sizing: border-box; font-family: system-ui, sans-serif; }
    #app { max-width: 720px; margin: 2rem auto; padding: 1rem; }
    .card { background: var(--gray); border-radius: 1rem; padding: 1rem; margin-bottom: 1.25rem; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
    .title { font-weight: 600; margin-bottom: 0.5rem; }
    .options { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.25rem; }
    .opt { display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem; border: 2px solid transparent; border-radius: 0.75rem; background: #fff; cursor: pointer; }
    .opt:hover { border-color: var(--red); }
    .opt input { accent-color: var(--red); }
    .opt input:checked + span { font-weight: 600; color: var(--red); }
    button.next { width: 100%; padding: 0.75rem; background: var(--red); color: #fff; font-weight: 600; border: none; border-radius: 0.75rem; margin-top: 1rem; }
    button.next:disabled { opacity: 0.5; }
    .cat-head { margin: 0.75rem 0 0.25rem; font-weight: 600; }
    .req { font-size: 0.8rem; opacity: 0.7; }
    a { text-decoration: none; color: inherit; }
  </style>
</head>
<body>
  <div id="app"></div>
  <script>
    // ====== Data Arrays ======
    const BB_CIRCUITS = {
      1: ["<a href=\"#\">Rotational Step-Ups (L-R)</a>", "<a href=\"#\">Flys (bench)</a>", "<a href=\"#\">Lunges (L-R)</a>", "<a href=\"#\">Lat Pulldown</a>", "<a href=\"#\">Stooped Russian Twists w/ stop</a>", "<a href=\"#\">Good Mornings</a>", "<a href=\"#\">DB Alternating Toe Touches</a>", "<a href=\"#\">V-Sits</a>", "<a href=\"#\">Hanging Lateral Leg Lifts</a>", "<a href=\"#\">Twisting Sit-ups</a>", "<a href=\"#\">Pullovers</a>", "<a href=\"#\">Russian Twists (Hay Bales)</a>"],
      2: ["<a href=\"#\">Lunge w/ Twist</a>", "<a href=\"#\">Single-Arm Bent Over Row</a>", "<a href=\"#\">Weighted Crunches</a>", "<a href=\"#\">Straight-Leg Deadlift</a>", "<a href=\"#\">Arm Curls</a>", "<a href=\"#\">Seated Shoulder Press</a>", "<a href=\"#\">Lat Pulldown</a>", "<a href=\"#\">DB Alternating Toe Touches</a>", "<a href=\"#\">Dips</a>", "<a href=\"#\">Hanging Leg Lifts</a>", "<a href=\"#\">Push-ups (feet up)</a>", "<a href=\"#\">Back Hypers</a>", "<a href=\"#\">Pull-ups</a>"],
      3: ["<a href=\"#\">Russian Twists ‚Äì Standing</a>", "<a href=\"#\">Arm Curls</a>", "<a href=\"#\">DB Lateral Flys</a>", "<a href=\"#\">DB Alternating Toe Touches</a>", "<a href=\"#\">Rotational Step-Ups</a>", "<a href=\"#\">Weighted Crunches</a>", "<a href=\"#\">Inverted Row</a>", "<a href=\"#\">Russian Twist Lunge</a>", "<a href=\"#\">Hanging Knee Raises</a>", "<a href=\"#\">Single-Arm Row</a>", "<a href=\"#\">Military Press</a>", "<a href=\"#\">Straight-Leg Deadlift</a>", "<a href=\"#\">Weighted Back Hyper</a>", "<a href=\"#\">Hanging L's</a>"],
      4: ["<a href=\"#\">Inverted Row</a>", "<a href=\"#\">Military Press</a>", "<a href=\"#\">Weighted Back Hyper</a>", "<a href=\"#\">Hanging Knee Raises</a>", "<a href=\"#\">Overhead Twist</a>", "<a href=\"#\">Toe Risers</a>", "<a href=\"#\">Crossover Step-Ups</a>", "<a href=\"#\">Face Pulls</a>", "<a href=\"#\">DB Lateral Flys</a>", "<a href=\"#\">Seated Good Morning</a>", "<a href=\"#\">V-Sits</a>", "<a href=\"#\">Hanging Leg Raise</a>"]
    };
    const REGIONAL   = ["<a href=\"#\">RDL</a>", "<a href=\"#\">Hip Thrust</a>", "<a href=\"#\">Step-Ups</a>", "<a href=\"#\">DB Row</a>", "<a href=\"#\">Lat Pull-Down</a>", "<a href=\"#\">Nordic Curl</a>"];
    const BALLISTIC  = ["<a href=\"#\">Jump Squat</a>", "<a href=\"#\">Trap-Bar Jump</a>", "<a href=\"#\">Bench Press Throw</a>", "<a href=\"#\">Overhead Med-Ball Throw</a>", "<a href=\"#\">Split-Jerk Jump</a>"];
    const OLYMPIC    = ["<a href=\"#\">Power Clean</a>", "<a href=\"#\">Hang Clean</a>", "<a href=\"#\">Power Snatch</a>", "<a href=\"#\">Mid-Thigh Clean Pull</a>", "<a href=\"#\">Snatch Pull</a>", "<a href=\"#\">Clean Pull</a>", "<a href=\"#\">DB Snatch</a>"];
    const STATIC     = ["<a href=\"#\">Back Squat</a>", "<a href=\"#\">Front Squat</a>", "<a href=\"#\">Trap-Bar Deadlift</a>", "<a href=\"#\">Conventional Deadlift</a>", "<a href=\"#\">Split Squat (heavy)</a>", "<a href=\"#\">Bench Press</a>", "<a href=\"#\">Incline Bench</a>", "<a href=\"#\">Weighted Pull-ups</a>", "<a href=\"#\">Military Press</a>", "<a href=\"#\">Weighted Dips</a>"];
    const RS         = ["<a href=\"#\">Continuous Hurdle Hops</a>", "<a href=\"#\">Bounding Series</a>", "<a href=\"#\">Single-Leg Pogos</a>", "<a href=\"#\">Overhead Back MB Heave</a>"];
    const LIFTS      = { static: STATIC, regional: REGIONAL, olympic: OLYMPIC, ballistic: BALLISTIC, rs: RS };

    const SCHEMES = {
      RFD:  { sets:"5-9", reps:"1-2", pct:"90-100%", rest:"3-5 min" },
      RFDP: { sets:"4-9", reps:"2-4", pct:"70-85%", rest:"2-3 min" },
      BPD:  { sets:"4-9", reps:"4-5", pct:"50-65%", rest:"2-3 min" },
      ASD:  { sets:"4-8", reps:"1-5", pct:"80-100%", rest:"3-5 min" },
      ASC:  { sets:"3-6", reps:"4-8", pct:"60-80%", rest:"2-3 min" },
      BB:   { rest:"60-90 s" },
      RS:   { sets:"3-8", reps:"5-12", pct:"BW-50%", rest:"1-2 min" }
    };

    let S = {};
    const app = document.getElementById("app");

    function reqTable(phase, sch) {
      if(sch === "BB") {
        return { static:0, olympic:0, ballistic:0, regional:0, rs:0, bb:1 };
      }
      const r = { static:1, olympic:1, ballistic:1, regional:1, rs:0, bb:0 };
      switch(phase) {
        case "acc":  // Accumulation: add regional emphasis
          r.regional = 2;
          break;
        case "trans":// Transmutation: add reactive emphasis
          r.rs = 1;
          break;
        case "real": // Realization: less regional, more reactive
          r.regional = 0;
          r.rs = 1;
          break;
        case "main": // Maintenance: minimal strength, keep reactive
          r.static = 0;
          r.ballistic = 0;
          r.rs = 1;
          break;
      }
      return r;
    }

    function pres(cat, sch) {
      if(cat === "bb") return "60-90 s rest each";
      if(cat === "regional") return "3x8-10";
      if(cat === "ballistic") return "3x6 fast";
      if(cat === "rs") return SCHEMES.RS.sets + "x" + SCHEMES.RS.reps;
      const sc = SCHEMES[sch];
      return sc.sets + "x" + sc.reps + " @ " + sc.pct;
    }

    function radio(title, opts, key, next) {
      const card = document.createElement("div"); card.className="card";
      card.innerHTML = `<div class="title">${title}</div>`;
      const box = document.createElement("div"); box.className="options"; card.appendChild(box);
      opts.forEach(o => {
        box.insertAdjacentHTML("beforeend",
          `<label class="opt"><input type="radio" name="${key}" value="${o.v}"><span>${o.t}</span></label>`
        );
      });
      const btn = document.createElement("button"); btn.className="next"; btn.textContent="Next"; btn.disabled=true; card.appendChild(btn);
      card.addEventListener("change", ()=> btn.disabled=false);
      btn.onclick = ()=> { S[key] = card.querySelector("input:checked").value; next(); };
      return card;
    }

    function picker(req, next) {
      const card = document.createElement("div"); card.className="card";
      card.innerHTML = `<div class="title">5Ô∏è‚É£ Choose your lifts</div>`;
      if(req.bb) {
        card.insertAdjacentHTML("beforeend",
          `<p>Select bodybuilding circuit (60-90 s rest)</p>`
        );
        Object.entries(BB_CIRCUITS).forEach(([n, arr]) => {
          card.insertAdjacentHTML("beforeend",
            `<label class="opt"><input type="radio" name="bbc" value="${n}"><span>Circuit #${n} (${arr.length} exercises)</span></label>`
          );
        });
      }
      ["olympic","ballistic","static","regional","rs"].forEach(cat => {
        if(!req[cat]) return;
        card.insertAdjacentHTML("beforeend",
          `<div class="cat-head">${cat.toUpperCase()} <span class="req">(choose ${req[cat]})</span></div>`
        );
        const box = document.createElement("div"); box.className="options"; card.appendChild(box);
        LIFTS[cat].forEach(l => {
          box.insertAdjacentHTML("beforeend",
            `<label class="opt"><input type="checkbox" data-cat="${cat}" value="${l}"><span>${l}</span></label>`
          );
        });
      });
      const btn = document.createElement("button"); btn.className="next"; btn.textContent="Finish"; btn.disabled=true; card.appendChild(btn);
      card.addEventListener("change", ()=> {
        let ok = !req.bb || !!card.querySelector("[name='bbc']:checked");
        const cnt = {}; Object.keys(req).forEach(k=>cnt[k]=0);
        card.querySelectorAll("input[type='checkbox']:checked").forEach(cb=>cnt[cb.dataset.cat]++);
        ok = ok && Object.keys(req).every(k=>!req[k] || k==="bb" || cnt[k]===req[k]);
        btn.disabled = !ok;
      });
      btn.onclick = ()=> {
        S.chosen = {}; 
        if(req.bb) {
          const n = card.querySelector("[name='bbc']:checked").value;
          S.chosen.bb = BB_CIRCUITS[n];
          S.bbRounds = (n==="4"?1:2);
        }
        card.querySelectorAll("input[type='checkbox']:checked").forEach(cb=>{
          (S.chosen[cb.dataset.cat] = S.chosen[cb.dataset.cat]||[]).push(cb.value);
        });
        next();
      };
      return card;
    }

    function summary() {
      const sc = SCHEMES[S.scheme];
      let html = `<div class="card"><h2 class="title">üèãÔ∏è Your Workout</h2>`;
      if(sc.sets) html += `<p><strong>Scheme:</strong> ${S.scheme} ‚Üí ${sc.sets}x${sc.reps} @ ${sc.pct}</p>`;
      html += "<ul>";
      // Olympic first
      ["olympic","ballistic","static","regional","rs","bb"].forEach(cat => {
        if(S.chosen[cat]) {
          S.chosen[cat].forEach(l => {
            html += `<li>${l} ‚Äî ${pres(cat, S.scheme)}</li>`;
          });
        }
      });
      html += "</ul>";
      if(S.chosen.bb) html += `<p><em>Complete ${S.bbRounds} round(s) of chosen BB circuit.</em></p>`;
      html += `<button class="next" onclick="start()">Start over</button></div>`;
      app.innerHTML = html;
    }

    function start() {
      app.innerHTML = "";
      app.appendChild(radio("1Ô∏è‚É£ Season?", [
        {t:"Off-Season",v:"off"}, {t:"Pre-Season",v:"pre"}, {t:"In-Season",v:"in"}
      ], "season", ()=> {
        app.innerHTML = "";
        app.appendChild(radio("2Ô∏è‚É£ Phase?", [
          {t:"Accumulation",v:"acc"}, {t:"Transmutation",v:"trans"},
          {t:"Realisation",v:"real"}, {t:"Maintenance",v:"main"}
        ], "phase", ()=> {
          app.innerHTML = "";
          app.appendChild(radio("3Ô∏è‚É£ Track?", [
            {t:"Speed/Power",v:"speed"}, {t:"Strength",v:"strength"},
            {t:"Recovery",v:"recovery"}, {t:"Endurance",v:"endurance"}
          ], "track", ()=> {
            app.innerHTML = "";
            let opts = [];
            if(S.track==="speed") opts=[{t:"Fresh",v:"RFD"},{t:"Somewhat fresh",v:"RFDP"},{t:"Tired",v:"BPD"}];
            else if(S.track==="strength") opts=[{t:"Heavy",v:"ASD"},{t:"Moderate",v:"ASC"}];
            else if(S.track==="recovery") opts=[{t:"Bodybuilding",v:"BB"}];
            else opts=[{t:"Maintain",v:"ASC"}];
            app.appendChild(radio("4Ô∏è‚É£ How do you feel?", opts, "scheme", ()=> {
              const req = reqTable(S.phase, S.scheme);
              app.innerHTML = "";
              app.appendChild(picker(req, summary));
            }));
          }));
        }));
      }));
    }

    document.addEventListener("DOMContentLoaded", start);
  </script>
</body>
</html>
